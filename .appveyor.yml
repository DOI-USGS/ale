version: '0.8.1.{build}'

image: Visual Studio 2017

platform:
  - x64

configuration:
  - Release

install:
  - git submodule update --init --recursive

before_build:
  - mkdir build
  - cd build

build_script:
  - cmake -DWINDOWS_EXPORT_ALL_SYMBOLS=ON -DALE_BUILD_LOAD=OFF -DALE_USE_EXTERNAL_JSON=OFF -DALE_USE_EXTERNAL_EIGEN=OFF -G "Visual Studio 15 2017 Win64" -DBUILD_TESTS=OFF ..
  - cmake --build . --target ALL_BUILD --config Release

artifacts:
  - path: build\Release\ale.dll
    name: ale.dll
